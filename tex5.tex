\documentclass[dvipdfmx]{jsarticle}

\include{begin}

\section{JSPの基本}

本のp120までを読んでから、このセクションを行うとよい。

Eclipseを使ったやり方は、\href{https://sukkiri.jp/technologies/ides/eclipse/jsp_create.html?ssj=4}{JSPファイルの作成} を参照のこと。

exampleプロジェクト直下に sample.jsp という名前のファイルを作成する。
Eclipseの場合だと、管理上、WebContentフォルダに htmlファイルや
cssファイルを収めているが、Tomcatに配置する場合は、プロジェクト直下
となる。

\begin{tcolorbox}
\begin{verbatim}
./example
├── WEB-INF
│   ├── classes
│   └── lib
├── index.html
├── build.xml
├── sample.jsp
└── src
    └── servlet
        └── SampleServlet.java
\end{verbatim}
\end{tcolorbox}


「本」p122のリストである。

\begin{lstlisting}[caption=sample.jsp]
 <%@ page language="java" contentType="text/html; charset=UTF-8"
         pageEncoding="UTF-8" %>
<%@ page import="java.util.Date,
         java.text.SimpleDateFormat" %>

<%
// 運勢をランダムに決定
String[] luckArray = { "超スッキリ", "スッキリ", "最悪" };
int index = (int) (Math.random() * 3);
String luck = luckArray[index];

// 実行日を取得
Date date = new Date();
SimpleDateFormat sdf = new SimpleDateFormat("MM月dd日");
String today = sdf.format(date);

%>
<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>スッキリ占い</title>
  </head>
  <body>
    <p><%= today %>の運勢は「<%= luck %>」です</p>
  </body>
</html>
\end{lstlisting}

JSPファイルは配置後、Tomcatサーバーの再起動は必要ない。

ブラウザにて http://localhost:8080/example/sample.jsp にアクセスすることで
表示できる。

\include{end}

%% 修正時刻： Fri Jul 24 15:37:22 2020
